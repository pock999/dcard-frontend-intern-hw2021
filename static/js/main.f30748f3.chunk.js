(this["webpackJsonpdcard-frontend-hw2021"]=this["webpackJsonpdcard-frontend-hw2021"]||[]).push([[0],{116:function(t,e,n){"use strict";(function(t){n(138),n(139),n(140);var c=n(117),a=n.n(c),r=n(129),i=n(14);t._=a.a,e.a=function(){return Object(i.jsx)(r.a,{})}}).call(this,n(55))},129:function(t,e,n){"use strict";n.d(e,"a",(function(){return m}));var c=n(0),a=n.n(c),r=n(179),i=n(51),o=n(56),u=n(183),s=n(70),l=n(184),p=n(182),d=n(14),f=[{value:"",name:"\u5168\u90e8"},{value:"Taipei",name:"\u81fa\u5317\u5e02"},{value:"NewTaipei",name:"\u65b0\u5317\u5e02"},{value:"Taoyuan",name:"\u6843\u5712\u5e02"},{value:"Taichung",name:"\u81fa\u4e2d\u5e02"},{value:"Tainan",name:"\u81fa\u5357\u5e02"},{value:"Kaohsiung",name:"\u9ad8\u96c4\u5e02"},{value:"Keelung",name:"\u57fa\u9686\u5e02"},{value:"Hsinchu",name:"\u65b0\u7af9\u5e02"},{value:"HsinchuCounty",name:"\u65b0\u7af9\u7e23"},{value:"MiaoliCounty",name:"\u82d7\u6817\u7e23"},{value:"ChanghuaCounty",name:"\u5f70\u5316\u7e23"},{value:"NantouCounty",name:"\u5357\u6295\u7e23"},{value:"YunlinCounty",name:"\u96f2\u6797\u7e23"},{value:"ChiayiCounty",name:"\u5609\u7fa9\u7e23"},{value:"Chiayi",name:"\u5609\u7fa9\u5e02"},{value:"PingtungCounty",name:"\u5c4f\u6771\u7e23"},{value:"YilanCounty",name:"\u5b9c\u862d\u7e23"},{value:"HualienCounty",name:"\u82b1\u84ee\u7e23"},{value:"TaitungCounty",name:"\u81fa\u6771\u7e23"},{value:"KinmenCounty",name:"\u91d1\u9580\u7e23"},{value:"PenghuCounty",name:"\u6f8e\u6e56\u7e23"},{value:"LienchiangCounty",name:"\u9023\u6c5f\u7e23"}],h=function(t){if(!t)return"\u5168\u90e8";try{return f.find((function(e){return e.value===t})).name}catch(e){return"\u5168\u90e8"}},b=function(t){var e=t.data,n=t.historyPush,c=Object(r.d)().City;return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(u.a,{className:"site-page-header",title:h(c),subTitle:"This is a subtitle",extra:[Object(d.jsx)(s.a,{style:{width:120},defaultValue:h(c),onChange:function(t){n(""===t?"/scenicSpot":"/scenicSpot/".concat(t))},children:f.map((function(t){return Object(d.jsx)(s.a.Option,{value:t.value,children:t.name},t.value)}))})]}),Object(d.jsx)(l.b,{grid:{gutter:16,column:3},itemLayout:"vertical",dataSource:e,renderItem:function(t){return Object(d.jsx)(l.b.Item,{children:Object(d.jsx)(p.a,{style:{flex:1},hoverable:!0,children:Object(d.jsx)(p.a.Meta,{title:t.Name,description:t.Description})})})}})]})},v=n(44),j=[{path:"/",component:function(){return Object(d.jsx)(d.Fragment,{children:Object(d.jsx)("h1",{children:"Home"})})}},{path:"/scenicSpot",component:function(t){var e=Object(i.b)(),n=Object(i.c)((function(t){return t.ScenicSpotStore.scenicSpots})),c=a.a.useRef(0),r=function(){var t=window.innerHeight,n=document.documentElement.scrollTop,a=document.documentElement.scrollHeight;0!==c.current&&t+n+10>=a&&(e(v.b.FetchScenicSpotListAction({skip:30*c.current,city:""})),c.current++)};return a.a.useEffect((function(){return e(v.b.InitScenicSpotListAction({skip:0,city:""})),c.current++,window.addEventListener("scroll",r),function(){window.removeEventListener("scroll",r)}}),[]),a.a.useEffect((function(){}),[n]),Object(d.jsxs)("div",{children:[Object(d.jsx)(b,{data:n,historyPush:function(t){return o.a.push(t)}}),Object(d.jsx)("div",{style:{height:50},children:"\u8f09\u5165\u4e2d..."})]})}},{path:"/scenicSpot/:City",component:function(t){var e=Object(i.b)(),n=Object(i.c)((function(t){return t.ScenicSpotStore.scenicSpots})),c=Object(r.d)().City,u=a.a.useRef(1),s=function(){window.innerHeight+document.documentElement.scrollTop+10>=document.documentElement.scrollHeight&&(e(v.b.FetchScenicSpotListAction({skip:30*u.current,city:c})),u.current++)};return a.a.useEffect((function(){return e(v.b.InitScenicSpotListAction({skip:0,city:c})),window.addEventListener("scroll",s),function(){window.removeEventListener("scroll",s)}}),[]),a.a.useEffect((function(){e(v.b.InitScenicSpotListAction({skip:0,city:c})),u.current++}),[c]),a.a.useEffect((function(){}),[n]),Object(d.jsxs)("div",{children:[Object(d.jsx)(b,{data:n,historyPush:function(t){o.a.push(t)}}),Object(d.jsx)("div",{style:{height:50},children:"\u8f09\u5165\u4e2d..."})]})}}],m=function(){return Object(d.jsx)(r.c,{children:j.map((function(t,e){return Object(d.jsx)(r.a,{exact:!0,component:t.component,path:t.path},t.path)}))})}},137:function(t,e,n){},138:function(t,e,n){"use strict";n.p},139:function(t,e,n){},176:function(t,e,n){"use strict";n.r(e);var c=n(0),a=n.n(c),r=n(27),i=n.n(r),o=(n(137),n(116)),u=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,185)).then((function(e){var n=e.getCLS,c=e.getFID,a=e.getFCP,r=e.getLCP,i=e.getTTFB;n(t),c(t),a(t),r(t),i(t)}))},s=n(44),l=n(179),p=n(51),d=n(56),f=n(14);i.a.render(Object(f.jsx)(a.a.StrictMode,{children:Object(f.jsx)(p.a,{store:s.a,children:Object(f.jsx)(l.b,{history:d.a,basename:"/dcard-frontend-intern-hw2021",children:Object(f.jsx)(o.a,{})})})}),document.getElementById("root")),u()},44:function(t,e,n){"use strict";n.d(e,"b",(function(){return I}));var c=n(102),a=n(36),r=n.n(a),i=n(65),o=n(130),u=n(87),s=n(28),l=n(38),p=n(100),d=(n(66),n(101)),f=n.n(d),h=r.a.mark(y),b=r.a.mark(g),v="https://ptx.transportdata.tw/MOTC",j=Object(u.b)({name:"ScenicSpotStore",initialState:{scenicSpots:[]},reducers:{setscenicSpotList:function(t,e){t.scenicSpots=[].concat(Object(i.a)(t.scenicSpots),Object(i.a)(e.payload))},clearscenicSpotList:function(t,e){t.scenicSpots=[]}}}),m=j.actions,S=m.setscenicSpotList,O=m.clearscenicSpotList,x="SCENIC_SPOT_SAGA/FETCH_SCENIC_SPOTS_LIST";function y(t){var e,n,c,a,i,o,u;return r.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:if(console.log("=== FetchScenicSpotList ==="),e=t.payload,n=e.city,c=void 0===n?"":n,a=e.skip,0!==(i=void 0===a?0:a)){s.next=6;break}return s.next=6,Object(l.c)(O());case 6:return o=function(){var t=Object(p.a)(r.a.mark((function t(){var e,n;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n="?$top=30&",0!==i&&(n+="$skip=".concat(i,"&")),""!==c&&(n="/".concat(c).concat(n,"&")),t.next=6,f.a.get("".concat(v,"/v2/Tourism/ScenicSpot").concat(n));case 6:e=(e=t.sent).data,t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),e=t.t0;case 13:return t.abrupt("return",e);case 14:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(){return t.apply(this,arguments)}}(),s.prev=7,s.next=10,Object(l.b)(o);case 10:u=s.sent,s.next=16;break;case 13:s.prev=13,s.t0=s.catch(7),u=[];case 16:return s.next=18,Object(l.c)(S(u));case 18:case"end":return s.stop()}}),h,null,[[7,13]])}function g(t){var e,n,c;return r.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return console.log("=== InitScenicSpotList ==="),e=t.payload,a.next=4,Object(l.c)(O());case 4:return n=function(){var t=Object(p.a)(r.a.mark((function t(){var n,c,a,i,o,u;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,c=e.city,a=void 0===c?"":c,i=e.skip,u="?$top=30&",0!==(o=void 0===i?0:i)&&(u+="$skip=".concat(o)),""!==a&&(u="/".concat(a)+u),t.next=7,f.a.get("".concat(v,"/v2/Tourism/ScenicSpot").concat(u));case 7:n=(n=t.sent).data,t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),n=t.t0;case 14:return t.abrupt("return",n);case 15:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(){return t.apply(this,arguments)}}(),a.prev=5,a.next=8,Object(l.b)(n);case 8:c=a.sent,a.next=14;break;case 11:a.prev=11,a.t0=a.catch(5),c=[];case 14:return a.next=16,Object(l.c)(S(c));case 16:case"end":return a.stop()}}),b,null,[[5,11]])}var C={reducer:j.reducer,reducerActions:{setscenicSpotList:S,clearscenicSpotList:O},sagas:[Object(l.d)(x,y),Object(l.d)("SCENIC_SPOT_SAGA/INIT_SCENIC_SPOTS_LIST",g)],sagaActions:{FetchScenicSpotListAction:function(t){return{type:x,payload:t}},InitScenicSpotListAction:function(t){return{type:x,payload:t}}},selectors:{}},w=r.a.mark(k),L=Object(s.c)({ScenicSpotStore:C.reducer});function k(){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(l.a)(Object(i.a)(C.sagas));case 2:case"end":return t.stop()}}),w)}var T=Object(o.a)(),E=Object(u.a)({reducer:L,middleware:function(t){return[].concat(Object(i.a)(t({thunk:!1,serializableCheck:!1})),[T])}});T.run(k);Object(c.a)({},C.reducerActions);var I=Object(c.a)({},C.sagaActions);e.a=E},56:function(t,e,n){"use strict";var c=n(41);e.a=c.a()}},[[176,1,2]]]);
//# sourceMappingURL=main.f30748f3.chunk.js.map