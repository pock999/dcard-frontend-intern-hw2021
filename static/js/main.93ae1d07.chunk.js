(this["webpackJsonpdcard-frontend-hw2021"]=this["webpackJsonpdcard-frontend-hw2021"]||[]).push([[0],{104:function(t,e,n){"use strict";(function(t){n(0);var c=n(22),a=n(180),r=n(58),i=n(134),o=n(133),u=n(9),s=[{value:"",name:"\u5168\u90e8"},{value:"Taipei",name:"\u81fa\u5317\u5e02"},{value:"NewTaipei",name:"\u65b0\u5317\u5e02"},{value:"Taoyuan",name:"\u6843\u5712\u5e02"},{value:"Taichung",name:"\u81fa\u4e2d\u5e02"},{value:"Tainan",name:"\u81fa\u5357\u5e02"},{value:"Kaohsiung",name:"\u9ad8\u96c4\u5e02"},{value:"Keelung",name:"\u57fa\u9686\u5e02"},{value:"Hsinchu",name:"\u65b0\u7af9\u5e02"},{value:"HsinchuCounty",name:"\u65b0\u7af9\u7e23"},{value:"MiaoliCounty",name:"\u82d7\u6817\u7e23"},{value:"ChanghuaCounty",name:"\u5f70\u5316\u7e23"},{value:"NantouCounty",name:"\u5357\u6295\u7e23"},{value:"YunlinCounty",name:"\u96f2\u6797\u7e23"},{value:"ChiayiCounty",name:"\u5609\u7fa9\u7e23"},{value:"Chiayi",name:"\u5609\u7fa9\u5e02"},{value:"PingtungCounty",name:"\u5c4f\u6771\u7e23"},{value:"YilanCounty",name:"\u5b9c\u862d\u7e23"},{value:"HualienCounty",name:"\u82b1\u84ee\u7e23"},{value:"TaitungCounty",name:"\u81fa\u6771\u7e23"},{value:"KinmenCounty",name:"\u91d1\u9580\u7e23"},{value:"PenghuCounty",name:"\u6f8e\u6e56\u7e23"},{value:"LienchiangCounty",name:"\u9023\u6c5f\u7e23"}],l=function(t){if(!t)return"\u5168\u90e8";try{return s.find((function(e){return e.value===t})).name}catch(e){return"\u5168\u90e8"}};e.a=function(e){var n=e.data,p=e.historyPush,d=Object(c.f)().City;return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(a.a,{className:"site-page-header",title:l(d),subTitle:"This is a subtitle",extra:[Object(u.jsx)(r.a,{style:{width:120},defaultValue:l(d),onChange:function(t){p(""===t?"/scenicSpot":"/scenicSpot/".concat(t))},children:s.map((function(t){return Object(u.jsx)(r.a.Option,{value:t.value,children:t.name},t.value)}))})]}),Object(u.jsx)(i.b,{grid:{gutter:16,column:3},itemLayout:"vertical",dataSource:n,renderItem:function(e){return Object(u.jsx)(i.b.Item,{children:Object(u.jsx)(o.a,{style:{flex:1},hoverable:!0,children:Object(u.jsx)(o.a.Meta,{title:e.Name,description:t._.has(e,"Description")?e.Description:e.DescriptionDetail})})})}})]})}}).call(this,n(54))},117:function(t,e,n){"use strict";(function(t){n(141),n(142),n(143);var c=n(118),a=n.n(c),r=n(130),i=n(9);t._=a.a,e.a=function(){return Object(i.jsx)(r.a,{})}}).call(this,n(54))},130:function(t,e,n){"use strict";n.d(e,"a",(function(){return h}));var c=n(0),a=n.n(c),r=n(22),i=n(53),o=n(104),u=n(46),s=n(9),l=function(t){var e=Object(r.e)(),n=Object(i.b)(),c=Object(i.c)((function(t){return t.ScenicSpotStore.scenicSpots})),l=a.a.useRef(0),p=function(){var t=window.innerHeight,e=document.documentElement.scrollTop,c=document.documentElement.scrollHeight;0!==l.current&&t+e+10>=c&&(n(u.b.FetchScenicSpotListAction({skip:30*l.current,city:""})),l.current++)};return a.a.useEffect((function(){return n(u.b.InitScenicSpotListAction({skip:0,city:""})),l.current++,window.addEventListener("scroll",p),function(){window.removeEventListener("scroll",p)}}),[]),a.a.useEffect((function(){}),[c]),Object(s.jsxs)("div",{children:[Object(s.jsx)(o.a,{data:c,historyPush:function(t){return e.push(t)}}),Object(s.jsx)("div",{style:{height:50},children:"\u8f09\u5165\u4e2d..."})]})},p=function(t){var e=Object(i.b)(),n=Object(i.c)((function(t){return t.ScenicSpotStore.scenicSpots})),c=Object(r.e)(),l=Object(r.f)().City,p=a.a.useRef(1),d=function(){window.innerHeight+document.documentElement.scrollTop+10>=document.documentElement.scrollHeight&&(e(u.b.FetchScenicSpotListAction({skip:30*p.current,city:l})),p.current++)};return a.a.useEffect((function(){return e(u.b.InitScenicSpotListAction({skip:0,city:l})),window.addEventListener("scroll",d),function(){window.removeEventListener("scroll",d)}}),[]),a.a.useEffect((function(){e(u.b.InitScenicSpotListAction({skip:0,city:l})),p.current++}),[l]),a.a.useEffect((function(){}),[n]),Object(s.jsxs)("div",{children:[Object(s.jsx)(o.a,{data:n,historyPush:function(t){c.push(t)}}),Object(s.jsx)("div",{style:{height:50},children:"\u8f09\u5165\u4e2d..."})]})},d=n(44),f=[{path:"/",component:function(){return Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)("h1",{children:"Home"}),Object(s.jsx)(d.b,{to:"/scenicSpot",children:"\u666f\u9ede"})]})}},{path:"/scenicSpot",component:l},{path:"/scenicSpot/:City",component:p}],h=function(){return Object(s.jsx)(s.Fragment,{children:f.map((function(t,e){return Object(s.jsx)(r.a,{exact:!0,component:t.component,path:t.path},t.path)}))})}},140:function(t,e,n){},141:function(t,e,n){"use strict";n.p},142:function(t,e,n){},179:function(t,e,n){"use strict";n.r(e);var c=n(0),a=n.n(c),r=n(29),i=n.n(r),o=(n(140),n(117)),u=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,185)).then((function(e){var n=e.getCLS,c=e.getFID,a=e.getFCP,r=e.getLCP,i=e.getTTFB;n(t),c(t),a(t),r(t),i(t)}))},s=n(46),l=n(44),p=n(53),d=n(33).a(),f=n(9);i.a.render(Object(f.jsx)(a.a.StrictMode,{children:Object(f.jsx)(p.a,{store:s.a,children:Object(f.jsx)(l.a,{history:d,children:Object(f.jsx)(o.a,{})})})}),document.getElementById("root")),u()},46:function(t,e,n){"use strict";n.d(e,"b",(function(){return I}));var c=n(103),a=n(40),r=n.n(a),i=n(68),o=n(131),u=n(88),s=n(30),l=n(42),p=n(101),d=(n(69),n(102)),f=n.n(d),h=r.a.mark(y),b=r.a.mark(g),j="https://ptx.transportdata.tw/MOTC",v=Object(u.b)({name:"ScenicSpotStore",initialState:{scenicSpots:[]},reducers:{setscenicSpotList:function(t,e){t.scenicSpots=[].concat(Object(i.a)(t.scenicSpots),Object(i.a)(e.payload))},clearscenicSpotList:function(t,e){t.scenicSpots=[]}}}),S=v.actions,m=S.setscenicSpotList,O=S.clearscenicSpotList,x="SCENIC_SPOT_SAGA/FETCH_SCENIC_SPOTS_LIST";function y(t){var e,n,c,a,i,o,u;return r.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:if(console.log("=== FetchScenicSpotList ==="),e=t.payload,n=e.city,c=void 0===n?"":n,a=e.skip,0!==(i=void 0===a?0:a)){s.next=6;break}return s.next=6,Object(l.c)(O());case 6:return o=function(){var t=Object(p.a)(r.a.mark((function t(){var e,n;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n="?$top=30&",0!==i&&(n+="$skip=".concat(i,"&")),""!==c&&(n="/".concat(c).concat(n,"&")),t.next=6,f.a.get("".concat(j,"/v2/Tourism/ScenicSpot").concat(n));case 6:e=(e=t.sent).data,t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),e=t.t0;case 13:return t.abrupt("return",e);case 14:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(){return t.apply(this,arguments)}}(),s.prev=7,s.next=10,Object(l.b)(o);case 10:return u=s.sent,s.next=13,Object(l.c)(m(u));case 13:s.next=18;break;case 15:s.prev=15,s.t0=s.catch(7),u=[];case 18:case"end":return s.stop()}}),h,null,[[7,15]])}function g(t){var e,n,c;return r.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return console.log("=== InitScenicSpotList ==="),e=t.payload,a.next=4,Object(l.c)(O());case 4:return n=function(){var t=Object(p.a)(r.a.mark((function t(){var n,c,a,i,o,u;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,c=e.city,a=void 0===c?"":c,i=e.skip,u="?$top=30&",0!==(o=void 0===i?0:i)&&(u+="$skip=".concat(o)),""!==a&&(u="/".concat(a)+u),t.next=7,f.a.get("".concat(j,"/v2/Tourism/ScenicSpot").concat(u));case 7:n=(n=t.sent).data,t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),n=t.t0;case 14:return t.abrupt("return",n);case 15:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(){return t.apply(this,arguments)}}(),a.prev=5,a.next=8,Object(l.b)(n);case 8:return c=a.sent,a.next=11,Object(l.c)(m(c));case 11:a.next=16;break;case 13:a.prev=13,a.t0=a.catch(5),c=[];case 16:case"end":return a.stop()}}),b,null,[[5,13]])}var C={reducer:v.reducer,reducerActions:{setscenicSpotList:m,clearscenicSpotList:O},sagas:[Object(l.d)(x,y),Object(l.d)("SCENIC_SPOT_SAGA/INIT_SCENIC_SPOTS_LIST",g)],sagaActions:{FetchScenicSpotListAction:function(t){return{type:x,payload:t}},InitScenicSpotListAction:function(t){return{type:x,payload:t}}},selectors:{}},w=r.a.mark(k),L=Object(s.c)({ScenicSpotStore:C.reducer});function k(){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(l.a)(Object(i.a)(C.sagas));case 2:case"end":return t.stop()}}),w)}var T=Object(o.a)(),E=Object(u.a)({reducer:L,middleware:function(t){return[].concat(Object(i.a)(t({thunk:!1,serializableCheck:!1})),[T])}});T.run(k);Object(c.a)({},C.reducerActions);var I=Object(c.a)({},C.sagaActions);e.a=E}},[[179,1,2]]]);
//# sourceMappingURL=main.93ae1d07.chunk.js.map