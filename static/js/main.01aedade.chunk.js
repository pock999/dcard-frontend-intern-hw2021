(this["webpackJsonpdcard-frontend-hw2021"]=this["webpackJsonpdcard-frontend-hw2021"]||[]).push([[0],{105:function(t,e,n){"use strict";(function(t){n(0);var c=n(22),a=n(181),r=n(58),i=n(135),o=n(134),u=n(9),s=[{value:"",name:"\u5168\u90e8"},{value:"Taipei",name:"\u81fa\u5317\u5e02"},{value:"NewTaipei",name:"\u65b0\u5317\u5e02"},{value:"Taoyuan",name:"\u6843\u5712\u5e02"},{value:"Taichung",name:"\u81fa\u4e2d\u5e02"},{value:"Tainan",name:"\u81fa\u5357\u5e02"},{value:"Kaohsiung",name:"\u9ad8\u96c4\u5e02"},{value:"Keelung",name:"\u57fa\u9686\u5e02"},{value:"Hsinchu",name:"\u65b0\u7af9\u5e02"},{value:"HsinchuCounty",name:"\u65b0\u7af9\u7e23"},{value:"MiaoliCounty",name:"\u82d7\u6817\u7e23"},{value:"ChanghuaCounty",name:"\u5f70\u5316\u7e23"},{value:"NantouCounty",name:"\u5357\u6295\u7e23"},{value:"YunlinCounty",name:"\u96f2\u6797\u7e23"},{value:"ChiayiCounty",name:"\u5609\u7fa9\u7e23"},{value:"Chiayi",name:"\u5609\u7fa9\u5e02"},{value:"PingtungCounty",name:"\u5c4f\u6771\u7e23"},{value:"YilanCounty",name:"\u5b9c\u862d\u7e23"},{value:"HualienCounty",name:"\u82b1\u84ee\u7e23"},{value:"TaitungCounty",name:"\u81fa\u6771\u7e23"},{value:"KinmenCounty",name:"\u91d1\u9580\u7e23"},{value:"PenghuCounty",name:"\u6f8e\u6e56\u7e23"},{value:"LienchiangCounty",name:"\u9023\u6c5f\u7e23"}],l=function(t){if(!t)return"\u5168\u90e8";try{return s.find((function(e){return e.value===t})).name}catch(e){return"\u5168\u90e8"}};e.a=function(e){var n=e.data,p=e.historyPush,d=Object(c.f)().City;return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(a.a,{className:"site-page-header",title:l(d),subTitle:"This is a subtitle",extra:[Object(u.jsx)(r.a,{style:{width:120},defaultValue:l(d),onChange:function(t){p(""===t?"/scenicSpot":"/scenicSpot/".concat(t))},children:s.map((function(t){return Object(u.jsx)(r.a.Option,{value:t.value,children:t.name},t.value)}))})]}),Object(u.jsx)(i.b,{grid:{gutter:16,column:3},itemLayout:"vertical",dataSource:n,renderItem:function(e){return Object(u.jsx)(i.b.Item,{children:Object(u.jsx)(o.a,{style:{flex:1},hoverable:!0,children:Object(u.jsx)(o.a.Meta,{title:e.Name,description:t._.has(e,"Description")?e.Description:e.DescriptionDetail})})})}})]})}}).call(this,n(48))},118:function(t,e,n){"use strict";(function(t){n(142),n(143),n(144);var c=n(119),a=n.n(c),r=n(131),i=n(9);t._=a.a,t.cors="https://cors-anywhere.herokuapp.com/",e.a=function(){return Object(i.jsx)(r.a,{})}}).call(this,n(48))},131:function(t,e,n){"use strict";n.d(e,"a",(function(){return f}));var c=n(0),a=n.n(c),r=n(22),i=n(54),o=n(105),u=n(46),s=n(9),l=function(t){var e=Object(r.e)(),n=Object(i.b)(),c=Object(i.c)((function(t){return t.ScenicSpotStore.scenicSpots})),l=a.a.useRef(0),p=function(){var t=window.innerHeight,e=document.documentElement.scrollTop,c=document.documentElement.scrollHeight;0!==l.current&&t+e+10>=c&&(n(u.b.FetchScenicSpotListAction({skip:30*l.current,city:""})),l.current++)};return a.a.useEffect((function(){return n(u.b.InitScenicSpotListAction({skip:0,city:""})),l.current++,window.addEventListener("scroll",p),function(){window.removeEventListener("scroll",p)}}),[]),a.a.useEffect((function(){}),[c]),Object(s.jsxs)("div",{children:[Object(s.jsx)(o.a,{data:c,historyPush:function(t){return e.push(t)}}),Object(s.jsx)("div",{style:{height:50},children:"\u8f09\u5165\u4e2d..."})]})},p=function(t){var e=Object(i.b)(),n=Object(i.c)((function(t){return t.ScenicSpotStore.scenicSpots})),c=Object(r.e)(),l=Object(r.f)().City,p=a.a.useRef(1),d=function(){window.innerHeight+document.documentElement.scrollTop+10>=document.documentElement.scrollHeight&&(e(u.b.FetchScenicSpotListAction({skip:30*p.current,city:l})),p.current++)};return a.a.useEffect((function(){return e(u.b.InitScenicSpotListAction({skip:0,city:l})),window.addEventListener("scroll",d),function(){window.removeEventListener("scroll",d)}}),[]),a.a.useEffect((function(){e(u.b.InitScenicSpotListAction({skip:0,city:l})),p.current++}),[l]),a.a.useEffect((function(){}),[n]),Object(s.jsxs)("div",{children:[Object(s.jsx)(o.a,{data:n,historyPush:function(t){c.push(t)}}),Object(s.jsx)("div",{style:{height:50},children:"\u8f09\u5165\u4e2d..."})]})},d=n(44),h=[{path:"/",component:function(){return Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)("h1",{children:"Home"}),Object(s.jsx)(d.b,{to:"/scenicSpot",children:"\u666f\u9ede"})]})}},{path:"/scenicSpot",component:l},{path:"/scenicSpot/:City",component:p}],f=function(){return Object(s.jsx)(s.Fragment,{children:h.map((function(t,e){return Object(s.jsx)(r.a,{exact:!0,component:t.component,path:t.path},t.path)}))})}},141:function(t,e,n){},142:function(t,e,n){"use strict";n.p},143:function(t,e,n){},180:function(t,e,n){"use strict";n.r(e);var c=n(0),a=n.n(c),r=n(29),i=n.n(r),o=(n(141),n(118)),u=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,186)).then((function(e){var n=e.getCLS,c=e.getFID,a=e.getFCP,r=e.getLCP,i=e.getTTFB;n(t),c(t),a(t),r(t),i(t)}))},s=n(46),l=n(44),p=n(54),d=n(33).a(),h=n(9);i.a.render(Object(h.jsx)(a.a.StrictMode,{children:Object(h.jsx)(p.a,{store:s.a,children:Object(h.jsx)(l.a,{history:d,children:Object(h.jsx)(o.a,{})})})}),document.getElementById("root")),u()},46:function(t,e,n){"use strict";n.d(e,"b",(function(){return v}));var c=n(104),a=n(40),r=n.n(a),i=n(68),o=n(132),u=n(89),s=n(30),l=n(42),p=n(69),d=r.a.mark(f),h=Object(s.c)({ScenicSpotStore:p.a.reducer});function f(){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(l.a)(Object(i.a)(p.a.sagas));case 2:case"end":return t.stop()}}),d)}var b=Object(o.a)(),j=Object(u.a)({reducer:h,middleware:function(t){return[].concat(Object(i.a)(t({thunk:!1,serializableCheck:!1})),[b])}});b.run(f);p.a.selectors,Object(c.a)({},p.a.reducerActions);var v=Object(c.a)({},p.a.sagaActions);e.a=j},69:function(t,e,n){"use strict";(function(t){var c=n(40),a=n.n(c),r=n(102),i=n(68),o=n(89),u=(n(70),n(42)),s=n(103),l=n.n(s),p=a.a.mark(S),d=a.a.mark(O),h="https://ptx.transportdata.tw/MOTC",f=Object(o.b)({name:"ScenicSpotStore",initialState:{scenicSpots:[]},reducers:{setscenicSpotList:function(t,e){t.scenicSpots=[].concat(Object(i.a)(t.scenicSpots),Object(i.a)(e.payload))},clearscenicSpotList:function(t,e){t.scenicSpots=[]}}}),b=f.actions,j=b.setscenicSpotList,v=b.clearscenicSpotList,m="SCENIC_SPOT_SAGA/FETCH_SCENIC_SPOTS_LIST";function S(e){var n,c,i,o,s,d,f;return a.a.wrap((function(p){for(;;)switch(p.prev=p.next){case 0:if(console.log("=== FetchScenicSpotList ==="),n=e.payload,c=n.city,i=void 0===c?"":c,o=n.skip,0!==(s=void 0===o?0:o)){p.next=6;break}return p.next=6,Object(u.c)(v());case 6:return d=function(){var e=Object(r.a)(a.a.mark((function e(){var n,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,c="?$top=30&",0!==s&&(c+="$skip=".concat(s,"&")),""!==i&&(c="/".concat(i).concat(c,"&")),e.next=6,l.a.get("".concat(t.cors).concat(h,"/v2/Tourism/ScenicSpot").concat(c));case 6:n=(n=e.sent).data,e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),n=e.t0;case 13:return e.abrupt("return",n);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}(),p.prev=7,p.next=10,Object(u.b)(d);case 10:return f=p.sent,p.next=13,Object(u.c)(j(f));case 13:p.next=18;break;case 15:p.prev=15,p.t0=p.catch(7),f=[];case 18:case"end":return p.stop()}}),p,null,[[7,15]])}function O(e){var n,c,i;return a.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return console.log("=== InitScenicSpotList ==="),n=e.payload,o.next=4,Object(u.c)(v());case 4:return c=function(){var e=Object(r.a)(a.a.mark((function e(){var c,r,i,o,u,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r=n.city,i=void 0===r?"":r,o=n.skip,s="?$top=30&",0!==(u=void 0===o?0:o)&&(s+="$skip=".concat(u)),""!==i&&(s="/".concat(i)+s),e.next=7,l.a.get("".concat(t.cors).concat(h,"/v2/Tourism/ScenicSpot").concat(s));case 7:c=(c=e.sent).data,e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),c=e.t0;case 14:return e.abrupt("return",c);case 15:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}(),o.prev=5,o.next=8,Object(u.b)(c);case 8:return i=o.sent,o.next=11,Object(u.c)(j(i));case 11:o.next=16;break;case 13:o.prev=13,o.t0=o.catch(5),i=[];case 16:case"end":return o.stop()}}),d,null,[[5,13]])}e.a={reducer:f.reducer,reducerActions:{setscenicSpotList:j,clearscenicSpotList:v},sagas:[Object(u.d)(m,S),Object(u.d)("SCENIC_SPOT_SAGA/INIT_SCENIC_SPOTS_LIST",O)],sagaActions:{FetchScenicSpotListAction:function(t){return{type:m,payload:t}},InitScenicSpotListAction:function(t){return{type:m,payload:t}}},selectors:{}}}).call(this,n(48))}},[[180,1,2]]]);
//# sourceMappingURL=main.01aedade.chunk.js.map